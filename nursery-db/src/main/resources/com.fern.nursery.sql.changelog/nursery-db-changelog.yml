databaseChangeLog:
  - property:
      name: attribute_bytes_type
      value: BYTEA
      dbms: postgresql
  - property:
      name: attribute_bytes_type
      value: LONGVARBINARY
      dbms: hsqldb
  - property:
      name: attribute_bytes_type
      value: BLOB

  - changeSet:
      id: 1
      author: deep@usebirch.com
      changes:
        - createTable:
            tableName: projects
            columns:
              - column:
                  name: project_id
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: project_name
                  type: varchar(255)
                  constraints:
                    - nullable: false
              - column:
                  name: author_user_id
                  type: varchar(255)
                  constraints:
                    - nullable: false
              - column:
                  name: created_datetime
                  type: datetime
                  constraints:
                    nullable: false
              - column:
                  name: is_deleted
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: varchar(10000)
                  constraints:
                    nullable: false
              - column:
                  name: emoji_id
                  type: varchar(255)
        - createTable:
            tableName: project_flavors
            columns:
              - column:
                  name: project_flavor_id
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: project_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_flavors_project_id
                    references: projects(project_id)
              - column:
                  name: flavor_name
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: created_datetime
                  type: datetime
                  constraints:
                    nullable: false
              - column:
                  name: hidden
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: is_deleted
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: varchar(10000)
                  constraints:
                    nullable: false
              - column:
                  name: s3_object_key
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: github_repo_id
                  type: varchar(1000)
        - createTable:
            tableName: human_readable_projects
            columns:
              - column:
                  name: project_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_hr_projects_project_id
                    references: projects(project_id)
              - column:
                  name: human_readable_project_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    primaryKey: true
        - createTable:
            tableName: human_readable_flavors
            columns:
              - column:
                  name: project_flavor_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_hr_flavors_flavor_id
                    references: project_flavors(project_flavor_id)
              - column:
                  name: project_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: PK_hr_flavors
                    foreignKeyName: fk_hr_flavors_project_id
                    references: projects(project_id)
              - column:
                  name: human_readable_flavor_id
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: PK_hr_flavors
        - createTable:
            tableName: assignments
            columns:
              - column:
                  name: assignment_id
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: project_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_assignments_project_id
                    references: projects(project_id)
              - column:
                  name: assignment_name
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: created_datetime
                  type: datetime
                  constraints:
                    nullable: false
              - column:
                  name: is_deleted
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: varchar(10000)
                  constraints:
                    nullable: false
              - column:
                  name: deadline
                  type: ${attribute_bytes_type}
              - column:
                  name: allowed_flavors
                  type: ${attribute_bytes_type}
                  constraints:
                    nullable: false
              - column:
                  name: author_user_id
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: is_archived
                  type: boolean
                  constraints:
                    nullable: false
        - createTable:
            tableName: human_readable_assignments
            columns:
              - column:
                  name: assignment_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_hr_assignments_assignment_id
                    references: assignments(assignment_id)
              - column:
                  name: project_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: PK_hr_assignments
                    foreignKeyName: fk_hr_assignments_project_id
                    references: projects(project_id)
              - column:
                  name: human_readable_assignment_id
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: PK_hr_assignments
        - createTable:
            tableName: hidden_files
            columns:
              - column:
                  name: hidden_file_id
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: project_flavor_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_hidden_file_flavor_id
                    references: project_flavors(project_flavor_id)
              - column:
                  name: filename
                  type: varchar(1000)
                  constraints:
                    nullable: false
              - column:
                  name: s3_object_key
                  type: varchar(255)
                  constraints:
                    nullable: false
        - createTable:
            tableName: hidden_tests
            columns:
              - column:
                  name: hidden_test_stable_id
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: hidden_test_id
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: project_flavor_id
                  type: varchar(1000)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_hidden_test_flavor_id
                    references: project_flavors(project_flavor_id)
              - column:
                  name: hidden_test_yaml
                  type: ${attribute_bytes_type}
                  constraints:
                    nullable: false
        - createTable:
            tableName: hidden_test_files
            columns:
              - column:
                  name: hidden_test_stable_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_hidden_test_file
                    foreignKeyName: fk_hidden_test_files_test_id
                    references: hidden_tests(hidden_test_stable_id)
              - column:
                  name: hidden_file_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_hidden_test_file
                    foreignKeyName: fk_hidden_test_files_file_id
                    references: hidden_files(hidden_file_id)
